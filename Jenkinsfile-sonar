pipeline

{
    agent any
    stages
    { 
        stage ( 'scm checkout' )
        {steps {git branch: 'master', url: 'https://github.com/Ayushi26Bhagat/maven-project' } }

        stage ( 'unit test execution' )
        {steps {withMaven(globalMavenSettingsConfig: '', jdk: 'LocalJDK', maven: 'LocalMaven', mavenSettingsConfig: '', traceability: true) {
            sh 'mvn test'}
        
        } }

        stage ('create package & sonar analysis')
        { steps { withMaven(jdk: 'JAVA_HOME', maven: 'MAVEN_HOME') 
   {
     withSonarQubeEnv(credentialsId: 'sonar', installationName: 'sonar')
     {
         sh 'mvn package sonar:sonar'
     }
 } }}


    }
}
    

